# memory

提示词设计

角色设定：

1. 短期记忆（会话上下文）
  作用：捕捉当前话题和最近对话的重点。
  实现方式：
    保留最近 N 条消息的摘要，或者直接保存 N 条原始消息。
    根据上下文生成一个概述，帮助 LLM 理解当前话题。
    通过关键词提取、主题分析等方法，动态调整对话重点。
  更新机制：
    每次群聊发生新对话时，自动更新当前话题关键词和上下文摘要。
    超过容量的对话转移到长期记忆。

2. 长期记忆（存储历史与人物信息）
  作用：记录群聊的长期信息，如群成员的性格特点、兴趣爱好、历史事件等。
  存储内容：
    群聊主要内容：将话题进行分类，如“科技”“游戏”“日常闲聊”，为每个主题建立条目。
    群成员信息：包括成员昵称、发言风格、兴趣领域，以及对某些主题的专业性。
    LLM自身信息：记录 LLM 在群聊中的设定（如性格、语气、知识背景），确保一致性。
    通用知识：与群聊相关的特定领域信息（如游戏攻略、技术背景等）。

3. 记忆更新
  保留部分短期记忆
  上下文摘要生成
  上下文感知的转移机制


4. 获取记忆
  设计一个动态系统：
    优先主动传递必要记忆：在已知上下文中，筛选出对当前话题高度相关的记忆直接传递，如用户的兴趣、身份或近期发言的主题。
    必要时调用工具补充记忆：当 LLM 遇到模糊问题或需要追溯较多历史内容时，调用记忆工具查询。
  实现策略
    优先级筛选机制：
      定义高相关性的记忆内容，如：
        当前话题关键词相关的群成员信息。
        群成员近期 3 条发言的摘要。
      通过相关性评分（如 TF-IDF 或语义相似度）筛选内容。
    工具调用触发条件：
      设置触发规则，如用户提问包含“之前”“我说过”“那是谁”等时间或身份指示词。
      LLM 可以明确表达“我需要查询相关记忆”并调用工具。


